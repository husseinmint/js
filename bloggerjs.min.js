((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).BloggerJS=t()})(this,function(){function t(e){let t=null==e?0:e.length;if(!t)return[];let n=-1;for(var a=t-1,r=((e,t)=>{let n=-1;var a=e.length;for(t=t||new Array(a);++n<a;)t[n]=e[n];return t})(e);++n<t;){let e=n+Math.floor(Math.random()*(a-n+1)),t=r[e];r[e]=r[n],r[n]=t}return r}function g(e){if(!e)return!1;e=e.querySelector("[data-bjs=template]");if(!e)return!1;e.removeAttribute("data-bjs");var t=e.outerHTML;return e.remove(),t.replace(/data-src/g,"src")}function i(e,n){return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>n[t])}function d({dataset:t={}}){let n={};return Object.keys(t).forEach(e=>{n[e]="true"===(e=t[e])||"false"!==e&&(Number(e).toString()===e?Number(e):"null"===e||""===e?null:e)}),n}function m(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t).parentNode.removeChild(t)}window.location.origin;let T={firstPage:!1,perPage:7,length:5,label:null,prevText:"الصفحة السابقة",nextText:"الصفحة التالية",lastPageText:"الصفحة الأخيرة",ytThumbnail:"mqdefault",template:'<div><img src="{{img}}"/><a href="{{url}}">{{title}}</a></div>',empty:"<p>لم يتم العثور على مشاركات</p>",numberClass:"رقم الصفحة",nextPageClass:"الصفحة التالية",prevPageClass:"الصفحة السابقة",firstPageClass:"الصفحة الأولى",lastPageClass:"الصفحة الأخيرة",dotsPageClass:"نقاط الصفحات",firstPageVisible:!0,lastPageVisible:!0,infinite:!1,withButton:!1,buttonClass:"زر تحميل المزيد",buttonText:"تحميل المزيد من المشاركات",buttonTextLoading:"جاري تحميل المزيد",rootMargin:"100px"};function j({homepage:e,label:t,perPage:n,page:a}){m(e+`feeds/posts/default${t?"/-/"+t:""}?alt=json-in-script&callback=BloggerJS.entry&max-results=`+n+"&start-index="+((a-1)*n+1))}let M=document.querySelector("[data-bjs=entry]"),P=document.querySelector("[data-bjs=pagination]"),S,E=1,L=!1;function s(e){M.innerHTML+=e}return{sections:b,comments:y,related:function(e){if(e.feed.entry){let n="",a=e.feed.entry.filter(e=>e.id.$t.split(".post-")[1]!==v.id);e=((a=v.random?t(a):a).length<=v.length?a:v).length;Array.from({length:e}).forEach((e,t)=>{n+=i(v.template,p(a[t],v))}),C.innerHTML=n}},entry:function(n){if(n.feed.entry)if(T.infinite){let{button:e,container:t}=S;L=!1,{data:a,options:r,page:o,container:l}=[{button:e,container:t,page:E,data:n.feed.entry,options:T}][0],r.firstPage||1!==o||(l.innerHTML=""),a.forEach(e=>{r.firstPage&&1===o||(l.innerHTML+=i(r.template,p(e,r)))}),T.withButton&&(e.textContent=T.buttonText);a=Number(n.feed.openSearch$totalResults.$t),a=Math.ceil(a/(T.results??T.perPage));void(E>=a&&P.remove())}else{var a,r,o,l;let e=(({options:t,data:e,container:n})=>{let a="";return e.feed.entry.forEach(e=>{a+=i(t.template,p(e,t))}),N({...t,total:Number(e.feed.openSearch$totalResults.$t),container:n}),a})({options:T,data:n,container:P});M&&(M.innerHTML="",s(e))}else M.innerHTML="",s(T.empty),T.infinite&&P.remove()},initComments:function(l={}){Array.from(document.querySelectorAll("[data-bjs=comments]")).forEach((e,t)=>{var n,a,r={...x,...l,...d(e)},o=g(e);o&&(r.template=o),n=e,a=r,o="comments"+t,y[o]=e=>{let t="";e.feed.entry?e.feed.entry.forEach(e=>{e=p(e,a);t+=i(a.template,e)}):t+=a.empty,n.innerHTML=t},m(a.homepage+`feeds/comments/default?alt=json-in-script&callback=BloggerJS.comments.${o}&max-results=`+a.maxResults)})},initRelated:function(e={}){C&&(v={...v,...e,...d(C)},(e=g(C))&&(v.template=e),e=("string"==typeof v.tags?JSON.parse(v.tags):v.tags).map(e=>`label:"${e}"`).join("|"),m(`${v.homepage}feeds/posts/default?alt=json-in-script&callback=BloggerJS.related&max-results=${v.maxResults}&q=`+e))},initEntry:function(e={}){T={...T,...f(),...e,...d(M||!1),...d(P||!1)};e=g(M);e&&(T.template=e);let{firstPage:t,homepage:n,page:a,label:r,withButton:o,buttonClass:l,buttonText:i,rootMargin:s}=T,u=T.results??T.perPage,c=`${n}feeds/posts/default${r?"/-/"+r:""}?alt=json-in-script&callback=BloggerJS.entry&max-results=`+u;T.infinite?M&&P&&(m(`${t?c.replace(/max-results=(.[0-9]*)/,"max-results=1"):c}&start-index=1`),S=(({container:e,pagination:t,withButton:n=!1,buttonClass:a,buttonText:r,onClick:o,onVisible:l,rootMargin:i="100px"})=>{let s=null;if(n)(s=document.createElement("button")).className=a,s.textContent=r,s.addEventListener("click",()=>{o({button:s,container:e})}),t.innerHTML="",t.appendChild(s);else{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&l()})},{rootMargin:i});e.observe(t)}return{container:e,button:s}})({buttonClass:l,buttonText:i,rootMargin:s,withButton:o,container:M,pagination:P,onClick({button:e}){L||(e.textContent=T.buttonTextLoading,L=!0,E++,j({label:r,perPage:u,homepage:n,page:E}))},onVisible(){E++,j({label:r,perPage:u,homepage:n,page:E})}})):m(c+"&start-index="+((a-1)*u+1))},initSection:function(r={}){Array.from(document.querySelectorAll("[data-bjs=section]")).forEach((t,n)=>{let a={...$,...r,...d(t)},e=g(t);if(e&&(a.template=e),!0===a.observer){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&h(t,a,n)})},{rootMargin:a.rootMargin});e.observe(t)}else h(t,a,n)})}}});((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).BloggerJS=t()})(this,function(){function t(e){let t=null==e?0:e.length;if(!t)return[];let n=-1;for(var a=t-1,r=((e,t)=>{let n=-1;var a=e.length;for(t=t||new Array(a);++n<a;)t[n]=e[n];return t})(e);++n<t;){let e=n+Math.floor(Math.random()*(a-n+1)),t=r[e];r[e]=r[n],r[n]=t}return r}function g(e){if(!e)return!1;e=e.querySelector("[data-bjs=template]");if(!e)return!1;e.removeAttribute("data-bjs");var t=e.outerHTML;return e.remove(),t.replace(/data-src/g,"src")}function i(e,n){return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>n[t])}function d({dataset:t={}}){let n={};return Object.keys(t).forEach(e=>{n[e]="true"===(e=t[e])||"false"!==e&&(Number(e).toString()===e?Number(e):"null"===e||""===e?null:e)}),n}function m(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t).parentNode.removeChild(t)}window.location.origin;let T={firstPage:!1,perPage:7,length:5,label:null,prevText:"الصفحة السابقة",nextText:"الصفحة التالية",lastPageText:"الصفحة الأخيرة",ytThumbnail:"mqdefault",template:'<div><img src="{{img}}"/><a href="{{url}}">{{title}}</a></div>',empty:"<p>لم يتم العثور على مشاركات</p>",numberClass:"رقم الصفحة",nextPageClass:"الصفحة التالية",prevPageClass:"الصفحة السابقة",firstPageClass:"الصفحة الأولى",lastPageClass:"الصفحة الأخيرة",dotsPageClass:"نقاط الصفحات",firstPageVisible:!0,lastPageVisible:!0,infinite:!1,withButton:!1,buttonClass:"زر تحميل المزيد",buttonText:"تحميل المزيد من المشاركات",buttonTextLoading:"جاري تحميل المزيد",rootMargin:"100px"};function j({homepage:e,label:t,perPage:n,page:a}){m(e+`feeds/posts/default${t?"/-/"+t:""}?alt=json-in-script&callback=BloggerJS.entry&max-results=`+n+"&start-index="+((a-1)*n+1))}let M=document.querySelector("[data-bjs=entry]"),P=document.querySelector("[data-bjs=pagination]"),S,E=1,L=!1;function s(e){M.innerHTML+=e}return{sections:b,comments:y,related:function(e){if(e.feed.entry){let n="",a=e.feed.entry.filter(e=>e.id.$t.split(".post-")[1]!==v.id);e=((a=v.random?t(a):a).length<=v.length?a:v).length;Array.from({length:e}).forEach((e,t)=>{n+=i(v.template,p(a[t],v))}),C.innerHTML=n}},entry:function(n){if(n.feed.entry)if(T.infinite){let{button:e,container:t}=S;L=!1,{data:a,options:r,page:o,container:l}=[{button:e,container:t,page:E,data:n.feed.entry,options:T}][0],r.firstPage||1!==o||(l.innerHTML=""),a.forEach(e=>{r.firstPage&&1===o||(l.innerHTML+=i(r.template,p(e,r)))}),T.withButton&&(e.textContent=T.buttonText);a=Number(n.feed.openSearch$totalResults.$t),a=Math.ceil(a/(T.results??T.perPage));void(E>=a&&P.remove())}else{var a,r,o,l;let e=(({options:t,data:e,container:n})=>{let a="";return e.feed.entry.forEach(e=>{a+=i(t.template,p(e,t))}),N({...t,total:Number(e.feed.openSearch$totalResults.$t),container:n}),a})({options:T,data:n,container:P});M&&(M.innerHTML="",s(e))}else M.innerHTML="",s(T.empty),T.infinite&&P.remove()},initComments:function(l={}){Array.from(document.querySelectorAll("[data-bjs=comments]")).forEach((e,t)=>{var n,a,r={...x,...l,...d(e)},o=g(e);o&&(r.template=o),n=e,a=r,o="comments"+t,y[o]=e=>{let t="";e.feed.entry?e.feed.entry.forEach(e=>{e=p(e,a);t+=i(a.template,e)}):t+=a.empty,n.innerHTML=t},m(a.homepage+`feeds/comments/default?alt=json-in-script&callback=BloggerJS.comments.${o}&max-results=`+a.maxResults)})},initRelated:function(e={}){C&&(v={...v,...e,...d(C)},(e=g(C))&&(v.template=e),e=("string"==typeof v.tags?JSON.parse(v.tags):v.tags).map(e=>`label:"${e}"`).join("|"),m(`${v.homepage}feeds/posts/default?alt=json-in-script&callback=BloggerJS.related&max-results=${v.maxResults}&q=`+e))},initEntry:function(e={}){T={...T,...f(),...e,...d(M||!1),...d(P||!1)};e=g(M);e&&(T.template=e);let{firstPage:t,homepage:n,page:a,label:r,withButton:o,buttonClass:l,buttonText:i,rootMargin:s}=T,u=T.results??T.perPage,c=`${n}feeds/posts/default${r?"/-/"+r:""}?alt=json-in-script&callback=BloggerJS.entry&max-results=`+u;T.infinite?M&&P&&(m(`${t?c.replace(/max-results=(.[0-9]*)/,"max-results=1"):c}&start-index=1`),S=(({container:e,pagination:t,withButton:n=!1,buttonClass:a,buttonText:r,onClick:o,onVisible:l,rootMargin:i="100px"})=>{let s=null;if(n)(s=document.createElement("button")).className=a,s.textContent=r,s.addEventListener("click",()=>{o({button:s,container:e})}),t.innerHTML="",t.appendChild(s);else{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&l()})},{rootMargin:i});e.observe(t)}return{container:e,button:s}})({buttonClass:l,buttonText:i,rootMargin:s,withButton:o,container:M,pagination:P,onClick({button:e}){L||(e.textContent=T.buttonTextLoading,L=!0,E++,j({label:r,perPage:u,homepage:n,page:E}))},onVisible(){E++,j({label:r,perPage:u,homepage:n,page:E})}})):m(c+"&start-index="+((a-1)*u+1))},initSection:function(r={}){Array.from(document.querySelectorAll("[data-bjs=section]")).forEach((t,n)=>{let a={...$,...r,...d(t)},e=g(t);if(e&&(a.template=e),!0===a.observer){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&h(t,a,n)})},{rootMargin:a.rootMargin});e.observe(t)}else h(t,a,n)})}}});
